{%- for resource in resources -%}
resource "cloudflare_record" "{{ resource }}MX1" {
  depends_on = [cloudflare_zone.{{ resourcename }}]
  name       = "{{ resources[resource].name }}"
  ttl        = {{ resources[resource].ttl }}
  type       = "MX"
  priority   = "{{ resources[resource].priority1 }}"
  value      = "{{ resources[resource].value1 }}"
  zone_id    = cloudflare_zone.{{ resourcename }}.id
}

resource "cloudflare_record" "{{ resource }}MX2" {
  depends_on = [cloudflare_zone.{{ resourcename }}]
  name       = "{{ resources[resource].name }}"
  ttl        = {{ resources[resource].ttl }}
  type       = "MX"
  priority   = "{{ resources[resource].priority2 }}"
  value      = "{{ resources[resource].value2 }}"
  zone_id    = cloudflare_zone.{{ resourcename }}.id
}

{% endfor -%}